<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · OceanRasterConversions.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>OceanRasterConversions.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Overview"><span>Overview</span></a></li><li><a class="tocitem" href="#Package-workings"><span>Package workings</span></a></li><li><a class="tocitem" href="#Functions-exported-from-OceanRasterConversions"><span>Functions exported from <code>OceanRasterConversions</code></span></a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="literated/ECCO_example/">ECCO model output</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/jbisits/OceanRasterConversions.jl/blob/main/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="OceanRasterConversions.jl-documentation"><a class="docs-heading-anchor" href="#OceanRasterConversions.jl-documentation">OceanRasterConversions.jl documentation</a><a id="OceanRasterConversions.jl-documentation-1"></a><a class="docs-heading-anchor-permalink" href="#OceanRasterConversions.jl-documentation" title="Permalink"></a></h1><h2 id="Overview"><a class="docs-heading-anchor" href="#Overview">Overview</a><a id="Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Overview" title="Permalink"></a></h2><p>This package converts ocean varaibles that are saved as <code>Raster</code> data structures using <a href="https://github.com/TEOS-10/GibbsSeaWater.jl">GibbsSeaWater.jl</a>. <a href="https://github.com/rafaqz/Rasters.jl">Rasters.jl</a> provides excellent reading, writing and manipulation of geospatial data. Typically, the salt and temperature variables from ocean models or observational data are practical salinity and potential temperature so conversions must be to the TEOS-10 standard variables of absolute salinity and conservative temperature to accurately calculate further variables like seawater density.</p><p>Further conversions and other water mass transformation procedures will be added in the future.</p><h2 id="Package-workings"><a class="docs-heading-anchor" href="#Package-workings">Package workings</a><a id="Package-workings-1"></a><a class="docs-heading-anchor-permalink" href="#Package-workings" title="Permalink"></a></h2><p>This package will convert the variables practical salinity and potential temperature into absolute salinity and conservative temperature. In doing so a pressure variable is needed, so this is created and returned in the <code>RasterStack</code>. Lastly a density variable (either in-situ or potential referenced to a user input) is computed and added to the <code>RasterStack</code>. See the example for how the package can be used.</p><h3 id="Variables"><a class="docs-heading-anchor" href="#Variables">Variables</a><a id="Variables-1"></a><a class="docs-heading-anchor-permalink" href="#Variables" title="Permalink"></a></h3><p>The variables are named using the symbols that represent them. The symbols are unicode characters which can be generated in the julia repl by pressing tab after the varible</p><pre><code class="language-julia hljs">julia&gt; \theta#press tab</code></pre><p>will autocomplete to <code>θ</code>, the symbol for potential temperature. The subscript letters that are used to distinguish between practical salinity, <code>Sₚ</code>, and absolute salinity, <code>Sₐ</code>, are also added in the julia repl</p><pre><code class="language-julia hljs">julia&gt; S\_a#press tab</code></pre><p>Currently the varabile symbols are:</p><ul><li><code>θ</code> potential temperature</li><li><code>Θ</code> conservative temperature</li><li><code>Sₚ</code> practical salinity</li><li><code>Sₐ</code> absolute salinity</li><li><code>p</code> pressure</li><li><code>ρ</code> in-situ seawater density</li><li><code>σₚ</code> potential density at user defined reference pressure <code>ₚ</code>.</li></ul><h3 id="Limitations"><a class="docs-heading-anchor" href="#Limitations">Limitations</a><a id="Limitations-1"></a><a class="docs-heading-anchor-permalink" href="#Limitations" title="Permalink"></a></h3><p>If the required dimensions for the conversions are not present an error will be thrown. For example, trying to convert a <code>RasterStack</code> that has no depth dimension will not work as the <code>Z</code> dimension is not found and the pressure variable depends on depth. There is a manual workaround for this. When defining the <code>RasterStack</code> add the <code>Z</code> dimension as a single entry, rather than a <code>Vector</code>,</p><pre><code class="language-julia hljs">lons, lats, z = -180:180, -90:90, 0.0
stack = RasterStack(data, (X(lons), Y(lats), Z(z)))</code></pre><p>This is equivalent to a two dimensional <code>RasterStack</code> at sea-surface height (z = 0).</p><p>Currently the only dimension names that are supported are <code>X</code>, <code>Y</code>, <code>Z</code>, and <code>Ti</code>. Allowing for user specified dimensions has not yet been implemented.</p><h2 id="Functions-exported-from-OceanRasterConversions"><a class="docs-heading-anchor" href="#Functions-exported-from-OceanRasterConversions">Functions exported from <code>OceanRasterConversions</code></a><a id="Functions-exported-from-OceanRasterConversions-1"></a><a class="docs-heading-anchor-permalink" href="#Functions-exported-from-OceanRasterConversions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="OceanRasterConversions.convert_ocean_vars" href="#OceanRasterConversions.convert_ocean_vars"><code>OceanRasterConversions.convert_ocean_vars</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function convert_ocean_vars(raster::RasterStack, var_names::NamedTuple;
                            ref_pressure = nothing,
                            with_α = false,
                            with_β = false)
function convert_ocean_vars(raster::Rasterseries, var_names::NamedTuple;
                            ref_pressure = nothing,
                            with_α = false,
                            with_β = false)</code></pre><p>Convert ocean variables depth, practical salinity and potential temperature to pressure, absolute salinity and conservative temperature. All conversions are done using the julia implementation of TEOS-10 <a href="https://github.com/TEOS-10/GibbsSeaWater.jl">GibbsSeaWater.jl</a>. A new <code>Raster</code> is returned that contains the variables pressure, absolute salinity, conservative temperature and density (either in-situ or referenced to a user defined reference pressure). As pressure depends on latitude and depth, it is added as a new variable –- that is, each longitude, latitude, depth and time have a variable for pressure. A density variable is also computed which, by default, is <em>in-situ</em> density. Potential density at a reference pressure can be computed instead by passing a the keyword argument <code>ref_pressure</code>. Optional keyword arguments <code>with_α</code> and <code>with_β</code> allow the thermal expansion and haline contraction coefficients (respectively) to be computed and added to the returned <code>RasterStack/Series</code>.</p><p>The name of the variables for potential temperature and practical salinity must be passed in as a <code>NamedTuple</code> of the form <code>(Sₚ = :salt_name, θ = :potential_temp_name)</code> where <code>:potential_temp_name</code> and <code>:salt_name</code> are the name of the potential temperature and practical salinity in the <code>Raster</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jbisits/OceanRasterConversions.jl/blob/e1a93828cd08c4c62ea7bb61f71f3cf66b3bb732/src/oceanconversions.jl#L1-L27">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OceanRasterConversions.depth_to_pressure" href="#OceanRasterConversions.depth_to_pressure"><code>OceanRasterConversions.depth_to_pressure</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function depth_to_pressure(raster::Raster)
function depth_to_pressure(stack::RasterStack)</code></pre><p>Convert the depth dimension (<code>Z</code>) to pressure using <code>gsw_p_from_z</code>  from GibbsSeaWater.jl. Note that pressure depends on depth and <em>latitude</em> so the returned pressure is stored as a variable in the resulting <code>Raster</code> rather than replacing the vertical depth dimension.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jbisits/OceanRasterConversions.jl/blob/e1a93828cd08c4c62ea7bb61f71f3cf66b3bb732/src/oceanconversions.jl#L59-L65">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OceanRasterConversions.Sₚ_to_Sₐ" href="#OceanRasterConversions.Sₚ_to_Sₐ"><code>OceanRasterConversions.Sₚ_to_Sₐ</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function Sₚ_to_Sₐ(Sₚ::Raster)
function Sₚ_to_Sₐ(stack::RasterStack, Sₚ::Symbol)
function Sₚ_to_Sₐ(series::RasterSeries, Sₚ::Symbol)</code></pre><p>Convert a <code>Raster</code> of practical salinity (<code>Sₚ</code>) to absolute salinity (<code>Sₐ</code>) using <code>gsw_sa_from_sp</code> from GibbsSeaWater.jl. This conversion depends on pressure. If converting from a <code>RasterStack</code> or <code>RasterSeries</code>, the symbol for the practical salinity in the <code>RasterStack/Series</code> must be passed in as a <code>Symbol</code> –-  that is if the variable name is SALT the <code>RasterStack/Series</code>, the <code>Symbol</code> <code>:SALT</code> must be passed in.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jbisits/OceanRasterConversions.jl/blob/e1a93828cd08c4c62ea7bb61f71f3cf66b3bb732/src/oceanconversions.jl#L96-L105">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OceanRasterConversions.θ_to_Θ" href="#OceanRasterConversions.θ_to_Θ"><code>OceanRasterConversions.θ_to_Θ</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function θ_to_Θ(θ::Raster, Sₐ::Raster)
function θ_to_Θ(stack::RasterStack, var_names::NamedTuple)
function θ_to_Θ(series::RasterSeries, var_names::NamedTuple)</code></pre><p>Convert a <code>Raster</code> of potential temperature (<code>θ</code>) to conservative temperature (<code>Θ</code>) using <code>gsw_ct_from_pt</code>  from GibbsSeaWater.jl. This conversion depends on absolute salinity. If converting from a  from a <code>RasterStack</code> or a <code>RasterSeries</code>, the <code>var_names</code> must be passed in as for <code>convert_ocean_vars</code> –-  that is, as a named tuple in the form <code>(Sₚ = :salt_name, θ = :potential_temp_name)</code> where <code>:potential_temp_name</code> and <code>:salt_name</code> are the name of the potential temperature and salinity in the <code>RasterStack</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jbisits/OceanRasterConversions.jl/blob/e1a93828cd08c4c62ea7bb61f71f3cf66b3bb732/src/oceanconversions.jl#L148-L159">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OceanRasterConversions.get_ρ" href="#OceanRasterConversions.get_ρ"><code>OceanRasterConversions.get_ρ</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function get_ρ(Sₐ::Raster, Θ::Raster, p::Raster)
function get_ρ(stack::RasterStack, var_names::NamedTuple)
function get_ρ(series::RasterStack, var_names::NamedTuple)</code></pre><p>Compute in-situ density, <code>ρ</code>, using <code>gsw_rho</code> from GibbsSeaWater.jl. This computation depends on absolute salinity (<code>Sₐ</code>), conservative temperature (<code>Θ</code>) and pressure (<code>p</code>). To compute ρ from a <code>RasterStack</code> or <code>RasterSeries</code> the variable names must be passed into the function as a <code>NamedTuple</code> in the form <code>(Sₐ = :salt_var, Θ = :temp_var, p = :pressure_var)</code>. The returned <code>Raster</code> will have the same dimensions as <code>Rasterstack</code> that is passed in.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jbisits/OceanRasterConversions.jl/blob/e1a93828cd08c4c62ea7bb61f71f3cf66b3bb732/src/oceanconversions.jl#L192-L201">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OceanRasterConversions.get_σₚ" href="#OceanRasterConversions.get_σₚ"><code>OceanRasterConversions.get_σₚ</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function get_σₚ(Sₐ::Raster, Θ::Raster, p::Float64)
function get_σₚ(stack::RasterStack, var_names::NamedTuple)
function get_σₚ(series::RasterStack, var_names::NamedTuple)</code></pre><p>Compute potential density at reference pressure <code>p</code>, <code>σₚ</code>, using <code>gsw_rho</code> from GibbsSeaWater.jl. This computation depends on absolute salinity (<code>Sₐ</code>), conservative temperature (<code>Θ</code>) and a user entered reference pressure (<code>p</code>). Compute and return the potential density <code>σₚ</code> at reference pressure <code>p</code> from a <code>RasterStack</code> or <code>RasterSeries</code>. This computation depends on absolute salinity <code>Sₐ</code>, conservative temperature <code>Θ</code> and a reference pressure <code>p</code>. The variable names must be passed into the function as a <code>NamedTuple</code> in the form <code>(Sₐ = :salt_var, Θ = :temp_var, p = ref_pressure)</code>. Note <code>p</code> in this case is a number. The returned <code>Raster</code> will have the same dimensions as <code>Rasterstack</code> that is passed in.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jbisits/OceanRasterConversions.jl/blob/e1a93828cd08c4c62ea7bb61f71f3cf66b3bb732/src/oceanconversions.jl#L223-L236">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="literated/ECCO_example/">ECCO model output »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Monday 16 January 2023 06:53">Monday 16 January 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
